# EpicChain Graphical Wizard Variable Evaluation Reference

The **EpicChain Graphical Wizard** is a powerful tool designed to make smart contract development and debugging on the **EpicChain** blockchain more intuitive and accessible for developers. One of its key features is the ability to inspect and evaluate variables in real time within the **Visual Studio Code** environment. By leveraging information from the **EpicChain Virtual Machine** and the debug information generated by the smart contract compiler, the wizard provides insights into how variables are handled and displayed in the IDE. 

However, to offer developers even more control over how variables appear, the **EpicChain Graphical Wizard** allows fine-tuned manipulation and casting of variables using the **Watch window** in **Visual Studio Code**. This guide will walk you through how to effectively use the variable evaluation feature, cast operations, and storage variables to enhance your debugging workflow.

---

## Understanding Variable Evaluation

The **EpicChain Graphical Wizard** integrates deeply with Visual Studio Code's native debugging tools, allowing you to monitor and evaluate variables in the **Data Inspection Window** during the execution of your smart contracts. This feature is especially useful when developing complex decentralized applications (dApps) where tracking the state of variables can be critical to identifying and fixing issues.

By default, the **Data Inspection Window** displays variables based on their raw types as compiled by the smart contract's debugging information. However, sometimes the raw type may not give a clear or useful representation of the data for developers. For example, a variable might be stored as a byte array but actually represent a string.

To give developers more control, the **Watch window** allows variables to be cast into different data types, providing more meaningful representations of the variable values during debugging.

> **Note**: The screenshots and examples in this document are based on the [C# Domain smart contract sample](https://github.com/ngdseattle/domain-sample).

---

## Adding Variables to the Watch Window

In Visual Studio Code, the **Watch window** is a crucial tool for observing how specific variables behave during contract execution. There are two main ways to add variables to the **Watch window** for deeper inspection:

1. **Using the `Add Expression` Command**:
   - In the Watch window toolbar, click on the "Add Expression" button to manually add a variable or expression to be watched.
   - ![add expression](images/add-expression.png)

2. **Using the `Add to Watch` Command**:
   - Right-click on any variable in the variables panel and select "Add to Watch" from the context menu.
   - ![add to watch](images/add-to-watch.png)

Once added, the variable will be displayed in the **Watch window**. By default, it shows the same representation as in the variables panel, but you can modify how the variable is displayed by applying cast operators.

---

## Controlling Variable Display with Cast Operators

After adding a variable to the **Watch window**, developers can control how it is displayed by applying **cast operators**. Cast operators allow you to interpret a variable in a specific data type, which is especially useful when the underlying data format differs from its intended use. 

For instance, consider the variable `args[0]`, which is displayed as a byte array by default. In reality, this variable might represent a string, but without casting, itâ€™s shown in its raw byte form. By applying a cast operator like `(string)`, the variable can be reinterpreted and displayed as a readable string.

### Example Without Cast Operator:
In the screenshot below, the variable `args[0]` is displayed as a byte array by default.
![watch window example without cast operator](images/watch-window-no-cast.png)

### Example With Cast Operator:
By applying the `(string)` cast operator, the same variable is displayed as a human-readable string.
![watch window example with string cast operator](images/watch-window-str-cast.png)

### Supported Cast Operators:
The **EpicChain Graphical Wizard** supports several cast operators that allow you to convert variables into more readable or meaningful forms. Below is a table of the supported cast operators and their corresponding data types:

| Cast Operation | Data Type          |
| -------------- | ------------------ |
| `(int)`        | Integer            |
| `(bool)`       | Boolean            |
| `(string)`     | String             |
| `(hex)`        | Hex Encoded String |
| `(byte[])`     | Byte Array         |

---

## Working with Storage Variables

The **EpicChain Graphical Wizard** also allows developers to inspect **storage variables**. Storage variables represent data that is stored persistently on the blockchain and are often critical to the state of a smart contract.

In Visual Studio Code, storage variables can be added to the **Watch window** just like regular variables. However, they require a special syntax to reference the storage slots they occupy. Storage slots are represented using the special marker `$storage` followed by an index operator. The index value is derived from the storage slot key, which remains consistent relative to the key value.

### Example with Storage Variable:
In the screenshot below, the storage variable `$storage[536db05d].value` is displayed both as a byte array and, with the help of a cast operator, as a string.
![watch window example with string cast operator](images/watch-window-storage.png)

> **Note**: The `$storage` variable uses a custom calculated key value because actual key values can vary in length and be arbitrarily long. To keep the interface clean and manageable, the custom calculated key is always **eight characters long**, regardless of the true key length. This approach ensures that variable names take up minimal screen space while still being informative.

---

## Conclusion

The **EpicChain Graphical Wizard Variable Evaluation** feature in **Visual Studio Code** is a powerful tool that enhances your ability to debug and develop smart contracts on the EpicChain blockchain. By offering granular control over how variables are displayed and allowing for real-time evaluation of storage and non-storage variables, it makes the process of debugging smart contracts more efficient and intuitive.

As you become familiar with the wizard, you'll find that applying cast operators and managing storage variables in the **Watch window** gives you unprecedented control over your development workflow. These features can save you significant time and effort when troubleshooting complex dApps or blockchain-based applications.

As always, we encourage developers to report issues, suggest improvements, and contribute to the development of the **EpicChain Graphical Wizard** through our [GitHub repository](https://github.com/epicchainlabs/epicchain-graphical-wizard/issues). Stay tuned for further updates and enhancements as we continue to expand the capabilities of this powerful debugging tool.